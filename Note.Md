# Notes NodesJS 

## üîπ Typage  

- **Typage dynamique** :  
  - D√©tection du type √† l'ex√©cution, pas √† la compilation.  
  - Impossible de d√©tecter les erreurs de type avant la mise en production.  
  - Le type d'une variable change en fonction de son contenu.  

- **Typage statique** :  
  - Les incoh√©rences de type peuvent √™tre d√©tect√©es √† la compilation.  

---

## ‚öôÔ∏è Configuration TypeScript  

### **`package.json` (scripts)**  
```json
"scripts": {
  "dev": "nodemon dist/index.js",
  "build": "npx tsc"
}
```

### **`tsconfig.json`**  
- D√©commenter `"types": ["node", "jest"]` (mettre uniquement `["node"]` apr√®s test).  
- D√©commenter `"outDir": "./dist"`.  

### **Commandes**  
1. Compiler le projet :  
   ```sh
   pnpm build
   ```
   - Un dossier `dist` appara√Ætra.  
   - Une erreur peut survenir si `"types"` est mal configur√©.  

2. S√©parer deux terminaux :  
   - Un pour la compilation (`pnpm build`).  
   - Un pour l'ex√©cution (`pnpm dev`).  

3. Charger les variables d'environnement dans `index.ts` :  
   ```ts
   import dotenv from 'dotenv';
   dotenv.config();
   ```

---

## üìù Logs  
- Journal de bord des activit√©s du serveur.  

---

# üåê API REST  

## **D√©finition**  
- Une API REST met √† disposition une **ressource**.  

### **Formats de donn√©es**  
- **XML** : Langage balis√© pour stocker des donn√©es.  
- **JSON** : Format plus courant et l√©ger.  

### **Endpoints REST**  
- Structure des URL : une cha√Æne de caract√®res s√©par√©e par des `/`.  
- Chaque **m√©thode HTTP** permet d'acc√©der √† une action pr√©cise sur une ressource.  

### **Principes REST**  
- **Stateless** : Pas de stockage de contexte entre deux requ√™tes.  
- **Idempotence** : Une m√™me requ√™te produit toujours le m√™me effet (ex : `GET`).  

### **Requ√™tes HTTP courantes**  
| M√©thode  | Description  |
|----------|-------------|
| **GET**  | Lire une ressource |
| **POST** | Cr√©er une ressource |
| **PUT**  | Modifier/remplacer une ressource |
| **PATCH** | Modifier partiellement une ressource |
| **DELETE** | Supprimer une ressource |

### **Codes HTTP importants**  
| Code  | Signification |
|-------|-------------|
| `200` | Succ√®s (OK) |
| `201` | Cr√©ation r√©ussie (POST) |
| `204` | Suppression r√©ussie (DELETE) |
| `400` | Mauvaise requ√™te (client) |
| `500` | Erreur serveur (non anticip√©e) |

---

#  Comparaison REST, GraphQL et gRPC  

| REST  | GraphQL  | gRPC  |
|-------|---------|------|
| API publiques | Interfaces complexes | Communication interne |
| Architecture simple | Clients vari√©s | Microservices |
| Ressources distinctes | Requ√™tes imbriqu√©es | Haute performance |
| Cache HTTP efficace | √âvite le **overfetching** | Services en temps r√©el |

- **REST** : Standard mature, simple √† mettre en place.  
- **GraphQL** : Plus flexible, mais plus complexe.  
- **gRPC** : Tr√®s performant, mais moins adapt√© au Web.  


Voici tes notes restructur√©es en **Markdown** :  

---

###  Tests avec Jest  

####  Pourquoi utiliser Jest ?  
- Permet de **rep√©rer facilement les erreurs** dans le code.  
- Utile pour **tester notre JavaScript** et s'assurer que notre application fonctionne.  
- Particuli√®rement utile quand on travaille **seul**, pour identifier rapidement les probl√®mes.  

###  Mise en place d'une base de tests  
- On va **impl√©menter une base de tests** pour suivre l'avancement du projet.  
- Jest permet de **simuler le dialogue client-serveur**, utile pour tester notre API.  
- Il faut **aider Jest** √† tester des fonctionnalit√©s sp√©cifiques comme les requ√™tes HTTP.  

### Tester une API avec Jest  
- Simulation des requ√™tes HTTP pour tester notre backend.  
- V√©rification du bon fonctionnement des routes.  
- Test des r√©ponses attendues pour chaque endpoint.  

web service 

user service reprend la listes des utilisateur dans la couche model (mvc)

mvc pour une api rest
s√©paration des pr√©ocuppations
maintenance accru 
testabilit√© am√©lior√©e 
scalabilit√© simplifi√© 
r√©utilisabilit√© du code

le controleur traite la requete et gere tout √ßa 
controlleur mvc = chef d'orchestre
 
 la logique metier permet de faire tout les op√©rations sur les objet m√©tiers

 le service c'est la logique le repo c'est l'acc√®s a la base
 models c'est ce qu'on va manipuler en javascript c'est l'equivalent de la table en sql
 mongodb est un systeme de stockage de donn√©es pas bas√© sur sql
 rdbms = nitiales de relational database management system 
 database tables rows columns

 Mongodb 
 database collections documents fields
 pour cr√©er un type de donn√©es avec mongo on fait une collections 

 ecriver code model
 d√©finit la strucure des donn√©es valider les donn√©es convertir entre formats d√©finir les sch√©mas 
 debase de donn√©es
 mongoz gere toute les connexion et requete 
 l'avantage ce quon manipule avec le code js et le meme en base